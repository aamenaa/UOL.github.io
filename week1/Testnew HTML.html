

/* CSS */
.hidden {
    display: none;
}

#search-form {
    position: absolute;
  right: 0;
  top: 100%;
  background-color: rgb(161, 61, 61);
  padding: 10px;
  border: 1px solid #943636;
  border-radius: 4px;
}

#search-form button {
    background: none;
    border: none;
    cursor: pointer;
    padding: 8px;
    display: inline-block; /* Remove display: flex */
    position: relative; /* Add position: relative */
}

#search-form button img {
    width: 20px; /* Adjust as needed */
    height: auto;
    position: absolute; /* Add position: absolute */
    top: 50%; /* Position the icon vertically in the button's center */
    transform: translateY(-50%); /* Adjust translateY value to fine-tune the vertical alignment */
    left: 5px; /* Move the icon slightly to the right */
}


/* Modernize Search Input */
#search-form input[type="text"] {
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px;
    width: 100%; /* Full width */
    box-sizing: border-box; /* Include padding in width */
    font-size: 16px; /* Larger font size */
}

.search-form-layout {
  display: flex;
  align-items: center;
}

.search-form-layout input,
.search-form-layout button {
  height: 40px;
}

.search-form-layout input {
  flex-grow: 1;
  border: none;
  padding: 8px;
}


/* Styles for the suggestion box */
.suggestion-box {
    background: white;
    border: 1px solid #ddd;
    border-radius: 4px;
    margin-top: 8px;
    max-height: 150px;
    overflow-y: auto;
}

/* Styles for each suggestion item */
.suggestion-item {
    padding: 8px;
    cursor: pointer;
}

.suggestion-item:hover {
    background-color: #f0f0f0;
}

/* Scrollbar Styling (optional, adjust colors as needed) */
.suggestion-box::-webkit-scrollbar {
    width: 5px;
}

.suggestion-box::-webkit-scrollbar-thumb {
    background: #888;
    border-radius: 2px;
}

.suggestion-box::-webkit-scrollbar-thumb:hover {
    background: #555;
}

/* Styles for highlighted text */
mark {
    background-color: yellow;
    color: black;
}

<script>
document.addEventListener('DOMContentLoaded', () => {
    const searchIcon = document.getElementById('search-icon');
    const searchForm = document.getElementById('search-form');
    const searchInput = document.querySelector('#search-form input[type="text"]');


    const keywords = ["Study", "Example", "Keyword3"]; // Modify as needed

    searchIcon.addEventListener('click', (event) => {
        event.preventDefault();
        searchForm.classList.toggle('hidden');
        if (!searchForm.classList.contains('hidden')) {
            removeHighlights();
        } else {
            const query = searchInput.value.trim();
            if (query) {
                highlightSearchWords(query);
            }
        }
    });

    
        searchInput.addEventListener('input', () => {
            const inputText = searchInput.value;
            showSuggestions(inputText);
        });
    
        function showSuggestions(text) {
            const suggestions = keywords.filter(keyword => 
                keyword.toLowerCase().startsWith(text.toLowerCase())
            );
    
            removeExistingSuggestions();
    
            if (suggestions.length) {
                const suggestionBox = document.createElement('div');
                suggestionBox.className = 'suggestion-box';
    
                suggestions.forEach(suggestion => {
                    const div = document.createElement('div');
                    div.textContent = suggestion;
                    div.className = 'suggestion-item';
                    div.addEventListener('click', () => {
                        searchInput.value = suggestion;
                        removeExistingSuggestions();
                        highlightSearchWords(suggestion);
                    });
                    suggestionBox.appendChild(div);
                });
    
                searchForm.appendChild(suggestionBox);
            }
        }
    
        function removeExistingSuggestions() {
            const existingSuggestions = document.querySelector('.suggestion-box');
            existingSuggestions?.remove();
        }
    

        function highlightSearchWords(word) {
        removeHighlights();
        const regex = new RegExp(`(${word})`, 'gi');
        document.body.innerHTML = document.body.innerHTML.replace(regex, (match) => `<mark class="highlighted">${match}</mark>`);
        scrollToFirstHighlight();
    }

    function scrollToFirstHighlight() {
        const firstHighlight = document.querySelector('.highlighted');
        if (firstHighlight) {
            firstHighlight.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }

    function removeHighlights() {
        const markedWords = document.querySelectorAll('mark.highlighted');
        markedWords.forEach(mark => {
            mark.outerHTML = mark.innerHTML; // Replace <mark> tag with its contents
        });
    }
    });
</script>

